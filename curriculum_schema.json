{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://resources.smileandlearn.net/curriculum.schema.json",
    "title": "Curriculum",
    "description": "A definition of a curricular framework from a Spanish region.",
    "type": "object",
    "properties": {
        "metadata": {
            "type": "object",
            "properties": {
                "region": { "type": "string" },
                "educational_stage": { "type": "string" },
                "version": { "type": "string" },
                "strings": {
                    "type": "object",
                    "properties": {
                        "stage_objectives": { "type": "string" },
                        "key_competencies": { "type": "string" },
                        "operational_descriptors": { "type": "string" },
                        "areas": { "type": "string" },
                        "cycle": { "type": "string" },
                        "specific_competencies": { "type": "string" },
                        "evaluation_criteria": { "type": "string" },
                        "contents": { "type": "string" },
                        "blocks": { "type": "string" },
                        "knowledge_skills": { "type": "string" }
                    },
                    "required": [
                        "stage_objectives",
                        "key_competencies",
                        "operational_descriptors",
                        "areas",
                        "cycle",
                        "specific_competencies",
                        "evaluation_criteria",
                        "contents",
                        "blocks",
                        "knowledge_skills"
                    ]
                }
            },
            "required": ["region", "education_level", "version", "strings"]
        },
        "data": {
            "type": "object",
            "properties": {
                "stage_objectives": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "key_competencies": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/keyCompetency" }
                },
                "areas": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/area" }
                }
            },
            "required": ["stage_objectives", "key_competencies", "areas"]
        }
    },
    "$defs": {
        "operationalDescriptor": {
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" }
            },
            "required": ["id", "name"]
        },
        "keyCompetency": {
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "operational_descriptors": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/operationalDescriptor" }
                }
            },
            "required": ["id", "name", "operational_descriptors"]
        },
        "specificCompetency": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "evaluation_criteria": {
                    "type": "array",
                    "items": { "type": "string" }
                }
            },
            "required": ["name", "evaluation_criteria"]
        },
        "content": {
            "type": "object",
            "properties": {
                "block_name": { "anyOf": [{ "type": "string" }, { "type": "null" }] },
                "knowledge_skills": {
                    "type": "array",
                    "items": { "type": "string" }
                },
                "contents": { 
                    "type": "array",
                    "items": { "$ref": "#/$defs/content" }
                }
            },
            "oneOf": [
                { "required": ["block_name", "knowledge_skills", "contents"] },
                { "required": ["block_name", "contents"] }
            ]
        },
        "course": {
            "type": "object",
            "properties": {
                "name": { "anyOf": [{ "type": "string" }, { "type": "null" }] },
                "specific_competencies": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/specificCompetency" }
                },
                "contents": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/content" }
                }
            },
            "required": ["name", "specific_competencies", "contents"]
        },
        "area": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "contents": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "cycle": { "type": "string" },
                            "courses": {
                                "type": "array",
                                "items": { "$ref": "#/$defs/course" }
                            }
                        },
                        "required": ["cycle", "courses"]
                    }
                }
            },
            "required": ["name", "contents"]
        }
    }
}